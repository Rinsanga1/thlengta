<header class="nav">
  <div class="container nav-inner">
    <div class="brand">
      <span>
        <img src="/assets/img/thlengtalogo.png" alt="Thlengta logo" width="80px"/>
      </span>
      <span class="small">
        <img src="/assets/img/thlengtalogotext.png" alt="Thlengta logo type" width="195px"/>
      </span>
      <span class="small">
        <img src="/assets/img/com.png" alt="Thlengta logo type" width="75px" style="margin-left: -10px"/>
      </span>
    </div>
    <nav class="nav-links">
      <a class="btn" href="/admin/dashboard">Back</a>
    </nav>
  </div>
</header>

<section class="section" style="padding-top:46px;">
  <div class="card pad super" style="max-width:980px;margin:0 auto;">
    <div class="topbar" style="margin-bottom:14px;">
      <div>
        <div class="h-eyebrow">
          <span class="chip">Workplace</span>
          <span class="chip">Setup</span>
          <span class="chip">Step 1 of 4</span>
        </div>
        <h2 style="margin:10px 0 0;">Workplace details</h2>
        <div class="small" style="margin-top:6px;">
          Add basic information first. Next we will set the workplace location and radius.
        </div>
      </div>
    </div>

    <% if (error) { %>
      <div class="error"><%= error %></div>
    <% } %>

    <form class="form" method="post" action="/admin/workplace/new/step-1" enctype="multipart/form-data">
      <!-- Responsive layout: 2 columns on desktop, stacked on mobile -->
      <div style="display:grid; grid-template-columns: 1.2fr 0.8fr; gap:14px;">
        <!-- Left: Basic info -->
        <div class="card pad" style="background:#fff;">
          <h3 style="margin:0 0 10px;">Basic info</h3>

          <div class="field">
            <label>Workplace Name</label>
            <input
              type="text"
              name="name"
              required
              placeholder="Example: SUNSET CAFE or ACME Corp"
              value="<%= (draft && draft.name) ? draft.name : '' %>"
            />
          </div>

          <div class="field">
            <label>Workplace Logo (optional)</label>
            <div style="display:flex; flex-direction:column; gap:6px;">
              <input type="file" name="logo" accept="image/png,image/jpeg,image/webp" />
              <div class="small">PNG/JPG/WebP supported.</div>
            </div>
          </div>

          <div class="field">
            <label>Address (optional)</label>
            <input
              type="text"
              name="address"
              placeholder="Street, City, State"
              value="<%= (draft && draft.address) ? draft.address : '' %>"
            />
          </div>

          <!-- Opening/Closing: 2 columns on desktop, stack on mobile -->
          <div style="display:grid; grid-template-columns: 1fr 1fr; gap:14px;">
            <div class="field">
              <label>Opening Time</label>
              <input
                type="text"
                name="opening_time"
                data-smarttime="1"
                required
                placeholder="e.g. 930, 1030am, 7pm"
                value="<%= draft.opening_time_12 || '' %>"
              />
              <div class="small">Tip: type 1030am, 930, 7pm</div>
            </div>

            <div class="field">
              <label>Closing Time</label>
              <input
                type="text"
                name="closing_time"
                data-smarttime="1"
                required
                placeholder="e.g. 6pm"
                value="<%= draft.closing_time_12 || '' %>"
              />
            </div>
          </div>

          <div class="actions" style="margin-top:14px; display:flex; gap:10px; flex-wrap:wrap;">
            <button class="btn primary" type="submit" style="width:auto;">Continue</button>
            <a class="btn" href="/admin/dashboard" style="width:auto;">Cancel</a>
          </div>
        </div>

        <!-- Right: Tips -->
        <div class="card pad" style="background:#f8faf9;">
          <h3 style="margin:0 0 10px;">Quick tips</h3>

          <div class="notice" style="margin-bottom:12px;">
            <div style="font-weight:900;">Why opening and closing time?</div>
            <div class="small" style="margin-top:6px;">
              This helps logs show on-time vs late, and later we can enforce sign-out before leaving.
            </div>
          </div>

          <div class="notice" style="background:#eaf6f0;">
            <div style="font-weight:900;">Works for any business</div>
            <div class="small" style="margin-top:6px;">
              You can use workplace for stores, offices, schools, teams, and field sites.
            </div>
          </div>

          <div class="small" style="margin-top:12px;">
            Next step will capture GPS location.
          </div>
        </div>
      </div>

      <!-- Mobile-only tweak: stack columns when screen is narrow -->
      <style>
        @media (max-width: 820px){
          .card.pad.super > form > div[style*="grid-template-columns"]{
            grid-template-columns: 1fr !important;
          }
          /* the opening/closing grid */
          .card.pad.super form div[style*="grid-template-columns: 1fr 1fr"]{
            grid-template-columns: 1fr !important;
          }
        }
      </style>
    </form>
  </div>
</section>

<script src="/js/smart_time_12h.js" defer></script>
